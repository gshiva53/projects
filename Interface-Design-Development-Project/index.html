<!DOCTYPE html>
<html lang="en">

<head>
    <title>
        Insert title here
    </title>
    <!-- Metadata -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>

<body>
    <!-- Vue.js app -->
    <div id="app">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <h1>Main heading!</h1>
                    <!-- IF the error object does not contain an error object then show the result -->
                    <div v-if="error && !(error.error)">
                        <h6>{{ apodResult.title }}</h6>
                        <p>{{ apodResult.explanation }}</p>
                        <!-- Display the image which links to the HD image -->
                        <a :href="apodResult.hdurl">
                            <img :src="apodResult.url" :alt="apodResult.title">
                        </a>
                    </div>
                </div>
            </div>
            <!-- Footer containing additional information and messages -->
            <footer>
                <div class="row">
                    <div class="col-12">
                        <!-- IF error exists then it can either be the result or the error message -->
                        <div v-if="error">
                            <!-- IF error.error exists then it is definitely the error with the error code and message -->
                            <div v-if="error.error">
                                <strong>
                                    <p>{{ error.error.code }}</p>
                                </strong>
                                <p>{{ error.error.message }}</p>
                            </div>
                        </div>
            </footer>
        </div>
    </div>


    <!-- Bootstrap javascript plug-ins -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
    <!-- Vue.js plug-ins -->
    <script src="https://unpkg.com/vue@3"></script>
    <script>
        const app = {
            data() {
                return {
                    apodResult: {},
                    apodResults: [],
                    error: null
                }
            },
            beforeCreate() {
                const apiKey = "tARTT0OeCAkt3TOHCOyvc6D2ZINWIbe86yOvKHa2"

                fetch("https://api.nasa.gov/planetary/apod?" +
                    "api_key=" + apiKey)
                    .then(response => response.json())
                    .then(data => this.apodResult = data)
                    .then(error => {
                        //error.error contains the error code and the error message
                        this.error = error
                        console.log(error)
                    })
            }
        }

        Vue.createApp(app)
            .mount("#app")
    </script>
</body>

</html>